# IRP (Iterative Residual Policy) - Reverse Engineering Log

**Дата начала:** 21 сентября 2025
**Цель:** Reverse engineering проекта IRP для понимания архитектуры и воссоздания функциональности

## Обзор проекта

### Исходная информация
- **Название:** Iterative Residual Policy for Goal-Conditioned Dynamic Manipulation of Deformable Objects
- **Статус:** RSS 2022 (Robotics: Science and Systems)
- **Исходный код:** `/home/aalto-robotics/IRP_Project/original/irp_project`

### Основные характеристики
- **Язык:** Python 3.8
- **Основные фреймворки:** PyTorch 1.9.0, PyTorch Lightning 1.4.4
- **CUDA:** 11.2
- **Симуляция:** MuJoCo 2.1.0
- **Контроль камеры:** OpenCV, ZED Camera SDK
- **Логирование:** Weights & Biases (wandb)

## Архитектурный анализ

### Структура проекта
```
irp_project/
├── environment.yml              # Conda окружение
├── eval_*.py                   # Скрипты оценки (5 шт)
├── train_*.py                  # Скрипты обучения (3 шт)
├── ur5_camera_calibration_app.py # Калибровка камеры
├── video_labeler.py            # Разметка видео
├── abr_control_mod/            # Модификации ABR control
├── assets/                     # MuJoCo модели (cloth, ur5)
├── common/                     # Общие утилиты (9 модулей)
├── components/                 # Компоненты сети (3 модуля)
├── config/                     # Конфигурационные файлы (8 YAML)
├── datasets/                   # Датасеты и аугментация (3 модуля)
├── environments/               # Симуляционные среды (5 модулей)
├── networks/                   # Нейросетевые архитектуры (3 модуля)
├── pl_vis/                     # PyTorch Lightning визуализация (3 модуля)
└── real_ur5/                   # Интеграция с реальным роботом (6 модулей)
```

### Ключевые компоненты

#### 1. Нейросетевая архитектура
- **DeepLab v3+** как основа для сегментации
- **ResNet** backbone
- **Tracking** компоненты для отслеживания объектов

#### 2. Датасеты
- **IRP Rope Dataset** (7.63GB) - основной для eval
- **IRP Cloth Dataset** (938MB) - для тренировки ткани
- Поддержка **zarr** формата для эффективного хранения

#### 3. Среды симуляции
- **MuJoCo** для физической симуляции
- **UR5** робот манипулятор
- **Cloth** и **Rope** объекты

## Этапы Reverse Engineering

### Этап 1: Анализ зависимостей [ВЫПОЛНЕНО]
- Изучен `environment.yml` (255 зависимостей)
- Ключевые пакеты: pytorch, torchvision, pytorch-lightning, opencv, wandb, zarr
- CUDA 11.2 и связанные библиотеки

### Этап 2: Создание рабочего окружения [В ПРОЦЕССЕ]
- Создана директория `/home/aalto-robotics/IRP_ReverseEngineering`
- Начато документирование процесса

## Проблемы и их решения

### Проблема 1: Понимание архитектуры
**Описание:** Сложная структура с множеством компонентов
**Решение:** Поэтапный анализ каждого модуля

### Следующие шаги
1. Копирование исходного кода
2. Создание conda окружения
3. Анализ основных модулей
4. Тестирование базовой функциональности
5. Документирование архитектурных решений

---

## Детальные заметки

### О датасетах
- Используется формат **zarr** для больших массивов данных
- Google Drive как основной источник данных
- Требуется ~8.5GB места для полного датасета

### О конфигурации
- **Hydra** для управления конфигурациями
- YAML файлы для каждого типа eval/train
- Поддержка multi-GPU через `action.gpu_id`

### О реальном роботе
- **UR5-CB3/UR5e** с RTDE интерфейсом
- **ZED 2i** стереокамера
- Кастомное крепление для деревянной палки
- Калибровка через homography
